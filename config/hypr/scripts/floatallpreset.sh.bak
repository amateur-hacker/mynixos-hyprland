#!/usr/bin/env bash

WIDTH=${1:-800}
HEIGHT=${2:-600}

WS_ID=$(hyprctl -j activewindow | jq '.workspace.id')
ACTIVE_ADDR=$(hyprctl -j activewindow | jq -r '.address')

WINDOWS=$(hyprctl -j clients | jq -r ".[] | select(.workspace.id == ${WS_ID}) | .address")

for WIN in $WINDOWS; do
  FLOATING=$(hyprctl -j clients | jq -r '.[] | select(.address=="'"$WIN"'") | .floating')

  if [[ "$FLOATING" == "false" ]]; then
    hyprctl dispatch togglefloating address:$WIN
    hyprctl dispatch resizewindowpixel exact "$WIDTH" "$HEIGHT",address:$WIN
    hyprctl dispatch focuswindow address:$WIN
    hyprctl dispatch centerwindow 1
  else
    hyprctl dispatch togglefloating address:$WIN
  fi
done
